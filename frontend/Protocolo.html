<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Minha Tipagem Sanguínea </title>
    <link rel="icon" href="img/Bolsa.png">
    <link rel="stylesheet" href="Protocolo.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
</head>


<body id="body">
    <div id="div">
        <div class="div1">
            <div class="janela1">
                <div id="conteudo1" class="conteudo1">
                    <button class="cor" onclick="alterarCor('black')">Escuro</button>
                    <button class="cor1" onclick="alterarCor('white')">Claro</button>
                    
                    <h2 class="titulo"> Tipagem sanguínea e fator RH </h2>
                    <form class="formulario" onsubmit="event.preventDefault(); resultar();">
                        <input type="text" class="input" placeholder="Hospital Saúde da Gestante" disabled> <!--disabled impede de digitar no input-->
                        <input type="text" class="input" placeholder="00.001.345/0001-98" disabled>
                        <input type="text" class="input" placeholder="Rua São Bartolomeu" disabled>
                        <input type="text" class="input" placeholder="(61) 3333-9999" disabled>
                        <input type="text" class="input" placeholder="hospital@saude.com" disabled>
                        <input class="numProtocolo" placeholder="Protocolo: 10013-12345" disabled>
                    </form>
                </div>
            </div>
        </div>

        <div class="div2">
            <div class="janela2">
                <div id="conteudo2" class="conteudo">
                    <ul id="ul1" class="ul1">
                        <li class="li1">
                            <p>Parentesco</p>
                        </li>
                        <li class="li1">
                            <p>Nome</p>
                        </li>
                        <li class="li1">
                            <p>Tipo sanguíneo</p>
                        </li>
                        <li class="li1">
                            <p>Fator RH</p>
                        </li>
                        <button class="baixarIMG" onclick="baixarPDF()"><img class="img" src="img/baixar.png"
                                width="15px"></button>
                        <button class="baixar" onclick="baixarPDF()"> <b> BAIXAR RELATÓRIO </b> </button>
                        <hr class="hr">
                        <button type="submit" class="sair" href="Login.html"> <b> SAIR </b> </button>
                    </ul>
                    <ul class="ul2">
                        <li class="li2">
                            <p>Mãe</p>
                        </li>
                        <li class="li2">
                            <p id="mamae">Flávia Silva Santos Peixoto Dias</p>
                        </li>
                        <li class="li2">
                            <p id="tipagemMae">AB</p>
                        </li>
                        <li class="li2">
                            <p id="fatorRhMae">-</p>
                        </li>
                    </ul>
                    <hr>
                    <ul class="ul2">
                        <li class="li2">
                            <p>Pai</p>
                        </li>
                        <li class="li2">
                            <p id="papai">Kleber Ferreria Dutra Nascimento</p>
                        </li>
                        <li class="li2">
                            <p id="tipagemPai">AB</p>
                        </li>
                        <li class="li2">
                            <p id="fatorRhPai">+</p>
                        </li>
                    </ul>
                    <hr>
                    <ul class="ul2">
                        <li class="li2">
                            <p>Filho(a)</p>
                        </li>
                        <li class="li2">
                            <p id="criança">Diana Silva Santos Dutra Nascimento</p>
                        </li>
                        <li class="li2">
                            <p id="tipagemCriança">AB</p>
                        </li>
                        <li class="li2">
                            <p id="fatorRhCriança">+</p>
                        </li>
                    </ul>

                    <div id="transfusão">
                        <div id="onoff" class="onoff">
                            <input type="checkbox" class="toggle" id="onoff1">
                            <label for="onoff1"></label>
                            <p class="p">Deseja saber para quem poderá fazer ou receber transfusão de sangue?</p>
                        </div>
                    </div>

                    <div id="doar" style="display: none;">
                        <ul id="ul1" class="ul1">
                            <li class="tipagem">
                                <p class="tipo">Tipagem</p>
                            </li>
                            <li class="tipagem1">
                                <p id="doador" class="doador">Para quem pode doar</p>
                            </li>
                            <li class="tipagem1">
                                <p id="doação" class="doação">De quem pode receber</p>
                            </li>
                        </ul>

                        <ul id="ul2" class="ul2">
                            <li class="tipagem2">
                                <p id="tipo1" class="tipo1"> Se for O+</p>
                            </li>
                            <li class="tipagem3">
                                <p id="doador1" class="doador1">O+</p>
                            </li>
                            <li class="tipagem4">
                                <p id="doação1" class="doação1">O+</p>
                            </li>
                        </ul>
                        <ul id="ul2" class="ul2">
                            <li class="tipagem2">
                                <p id="tipo1" class="tipo1">Se for A+</p>
                            </li>
                            <li class="tipagem3">
                                <p id="doador1" class="doador1">A+</p>
                            </li>
                            <li class="tipagem4">
                                <p id="doação1" class="doação1">A+</p>
                            </li>
                        </ul>
                        <ul id="ul2" class="ul2">
                            <li class="tipagem2">
                                <p id="tipo1" class="tipo1">Se for B+</p>
                            </li>
                            <li class="tipagem3">
                                <p id="doador1" class="doador1">B+</p>
                            </li>
                            <li class="tipagem4">
                                <p id="doação1" class="doação1">B+</p>
                            </li>
                        </ul>
                        <ul id="ul2" class="ul2">
                            <li class="tipagem2">
                                <p id="tipo1" class="tipo1">Se for AB+</p>
                            </li>
                            <li class="tipagem3">
                                <p id="doador1" class="doador1">AB+: A+, A-, B+, B-, AB+, AB-, O+, O-</p>
                            </li>
                            <li class="tipagem4">
                                <p id="doação1" class="doação1">AB+: A+, A-, B+, B-, AB+, AB-, O+, O-</p>
                            </li>
                        </ul>
                    </div>

                    <div id="previsao">
                        <div id="onoff1" class="onoff1">
                            <input type="checkbox" class="toggle" id="onoff2">
                            <label for="onoff2"></label>
                            <p class="p">Deseja saber também a previsão do parto?</p>
                        </div>
                    </div>

                    <form id="partos" style="display: none;" action="parto.php" method="post">
                        <ul class="ul1">
                            <li class="parto">
                                <label class="label">Dia da última menstruação</label>
                                <input type="number" min="1" max="31" id="diaMenstruacao" name="diaMenstruacao" class="diaMenstruacao" required>
                            </li>
                            <li class="parto">
                                <label class="label">Mês da última menstruação</label>
                                <input type="number" min="1" max="12" id="mesMenstruacao" name="mesMenstruacao" class="mesMenstruacao" required>
                            </li>
                            <li class="parto">
                                <label class="label">Ano da última menstruação</label>
                                <input type="number" id="anoMenstruacao" name="anoMenstruacao" class="anoMenstruacao" required>
                            </li>
                        </ul>
                        <ul class="ul2">
                            <label class="label">A previsão do parto é para o dia: <b>02/09/2025</b></label> 
                         </ul>
                    </form>

                </div>
            </div>
        </div>
    </div>
</body>
<script>
    function alterarCor(cor) {
    document.body.style.backgroundColor = cor;
    localStorage.setItem('corDeFundo', cor); // Armazena a cor escolhida
}
window.onload = function () {
    const corSalva = localStorage.getItem('corDeFundo');
    if (corSalva) {
        document.body.style.backgroundColor = corSalva;
    }
};

function baixarPDF() {
    // Seleciona o conteúdo HTML que você deseja converter em PDF
    const content = document.getElementById("body"); // Aqui, capturamos o conteúdo dentro do <div id="conteudo">

    // Obter o nome da criança
    const nomeCrianca = document.getElementById('criança').textContent.trim();
    const nomeArquivo = nomeCrianca ? `${nomeCrianca}-relatório-tipagem-sanguínea.pdf` : 'relatório-tipagem-sanguínea.pdf';

    // Modificar a altura do conteúdo, se necessário
    content.style.height = '1000px'; // Defina a altura que você deseja, ou use um valor dinâmico

    // Opções de configuração do PDF
    const options = {
        margin: [-7, 0, 0, 0], // Margem do PDF
        filename: nomeArquivo,  // Nome do arquivo PDF com o nome da criança
        html2canvas: { scale: 4 },  // Aumenta a qualidade do conteúdo capturado (quanto maior o valor, maior a qualidade)
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'landscape' }  // Formato A4 (padrão), e orientação paisagem
    };

    // Usa o html2pdf para converter o conteúdo HTML para um arquivo PDF
    html2pdf().from(content).set(options).save(); // Gera o PDF e salva
}

function resultar() {
    let mae = document.getElementById('mae').value;
    let pai = document.getElementById('pai').value;
    let crianca = document.getElementById('crianca').value;
    let tipoMae = document.getElementById('tipoMae').value;
    let tipoPai = document.getElementById('tipoPai').value;
    let rhMae = document.getElementById('rhMae').value;
    let rhPai = document.getElementById('rhPai').value;
    let mamae = mae;
    let papai = pai;
    let criança = crianca;
    let tipagemMae = tipoMae;
    let tipagemPai = tipoPai;
    let fatorRhMae = rhMae;
    let fatorRhPai = rhPai;
    document.getElementById('mamae').textContent = mamae;
    document.getElementById('papai').textContent = papai;
    document.getElementById('criança').textContent = criança;
    document.getElementById('tipagemMae').textContent = tipagemMae;
    document.getElementById('tipagemPai').textContent = tipagemPai;
    document.getElementById('fatorRhMae').textContent = fatorRhMae;
    document.getElementById('fatorRhPai').textContent = fatorRhPai;
}

document.getElementById('onoff1').addEventListener('change', function () { //change serve para alterar o valor de um elemento
    let doarDiv = document.getElementById('doar');

    if (this.checked) {
        doarDiv.style.display = 'block';
    } else {
        doarDiv.style.display = 'none';
    }
});

document.getElementById('onoff2').addEventListener('change', function () {
    let partosDiv = document.getElementById('partos');

    if (this.checked) {
        partosDiv.style.display = 'block';
    } else {
        partosDiv.style.display = 'none';
    }
});
</script>
</html>